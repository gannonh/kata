---
phase: 02.2-decoupling-project-init-milestone-setup
plan: 03
type: execute
wave: 2
depends_on:
  - 02.2-02
files_modified:
  - tests/skills/starting-milestones.test.js
  - tests/skills/adding-milestones.test.js
autonomous: true

must_haves:
  truths:
    - "kata-starting-milestones directory no longer exists"
    - "Tests reference kata-adding-milestones skill"
    - "Tests pass for renamed skill"
  artifacts:
    - path: "tests/skills/adding-milestones.test.js"
      provides: "Test suite for adding-milestones skill"
      contains: "kata-adding-milestones"
  key_links:
    - from: "tests/skills/adding-milestones.test.js"
      to: "skills/kata-adding-milestones/SKILL.md"
      via: "cpSync skill installation"
      pattern: "kata-adding-milestones"
---

<objective>

Delete kata-starting-milestones and update tests to reference kata-adding-milestones.

Purpose: Complete the rename by removing old skill and ensuring tests target the new skill.
Output: Clean skill directory (no starting-milestones) and renamed test file.

</objective>

<context>

@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02.2-decoupling-project-init-milestone-setup/02.2-02-SUMMARY.md (dependency)

**Dependency:** Plan 02.2-02 must complete first (kata-adding-milestones must exist before we delete starting-milestones).

</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete kata-starting-milestones directory</name>
  <files>skills/kata-starting-milestones/</files>
  <action>
Remove the old skill directory:

```bash
rm -rf skills/kata-starting-milestones
```

Stage the deletion:

```bash
git add -A skills/kata-starting-milestones/
```
  </action>
  <verify>
```bash
# Verify directory is gone
[ ! -d skills/kata-starting-milestones ] && echo "Directory removed successfully"

# Verify git knows about the deletion
git status --porcelain | grep "D.*kata-starting-milestones"
```
  </verify>
  <done>
skills/kata-starting-milestones/ directory no longer exists and deletion is staged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rename and update test file</name>
  <files>
tests/skills/starting-milestones.test.js
tests/skills/adding-milestones.test.js
  </files>
  <action>
1. Rename the test file:
```bash
git mv tests/skills/starting-milestones.test.js tests/skills/adding-milestones.test.js
```

2. Update the test file content:

Read `tests/skills/adding-milestones.test.js` and make these changes:

- Change describe block: `'kata-starting-milestones'` → `'kata-adding-milestones'`
- Change skill source path: `'kata-starting-milestones'` → `'kata-adding-milestones'`
- Change skill destination path: `'kata-starting-milestones'` → `'kata-adding-milestones'`
- Update test descriptions to say "add milestone" instead of "start milestone"
- Update prompts to use "add milestone" phrasing (e.g., "add milestone v2.0" instead of "start milestone v2.0")
- Update skill path in static content tests

The test assertions should remain the same since the skill behavior is unchanged.

Example changes:
```javascript
// Before
describe('kata-starting-milestones', () => {
  // ...
  const skillSource = join(KATA_ROOT, 'skills', 'kata-starting-milestones');
  const skillDest = join(testDir, '.claude', 'skills', 'kata-starting-milestones');
  // ...
  it('responds to "start milestone v2.0"', async () => {
    const result = invokeClaude('start milestone v2.0 for advanced features', {

// After
describe('kata-adding-milestones', () => {
  // ...
  const skillSource = join(KATA_ROOT, 'skills', 'kata-adding-milestones');
  const skillDest = join(testDir, '.claude', 'skills', 'kata-adding-milestones');
  // ...
  it('responds to "add milestone v2.0"', async () => {
    const result = invokeClaude('add milestone v2.0 for advanced features', {
```

Also update the test that checks skill content (static content test):
```javascript
// Update path reference
const skillPath = join(testDir, '.claude', 'skills', 'kata-adding-milestones', 'SKILL.md');
```
  </action>
  <verify>
```bash
# Verify file renamed
[ -f tests/skills/adding-milestones.test.js ] && echo "Test file renamed"
[ ! -f tests/skills/starting-milestones.test.js ] && echo "Old test file removed"

# Verify content updated
grep "kata-adding-milestones" tests/skills/adding-milestones.test.js | head -3
grep -c "kata-starting-milestones" tests/skills/adding-milestones.test.js  # Should be 0
```
  </verify>
  <done>
Test file renamed to adding-milestones.test.js with all references updated to kata-adding-milestones.
  </done>
</task>

<task type="auto">
  <name>Task 3: Commit cleanup and test updates</name>
  <files>
skills/kata-starting-milestones/
tests/skills/starting-milestones.test.js
tests/skills/adding-milestones.test.js
  </files>
  <action>
Stage all changes and commit:

```bash
git add -A
git commit -m "$(cat <<'EOF'
refactor(02.2-03): delete starting-milestones, rename tests

Completes skill rename from starting-milestones to adding-milestones:
- Deleted skills/kata-starting-milestones/ directory
- Renamed tests/skills/starting-milestones.test.js to adding-milestones.test.js
- Updated test prompts to use "add milestone" phrasing
- Updated skill path references in tests

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"
```
  </action>
  <verify>
```bash
# Verify commit
git log -1 --oneline

# Verify skill directory gone
ls skills/ | grep -c "starting-milestones"  # Should be 0

# Verify test file renamed
ls tests/skills/ | grep milestones
```
  </verify>
  <done>
Commit exists with skill deletion and test rename. No trace of "starting-milestones" in skills directory.
  </done>
</task>

</tasks>

<verification>

```bash
# Verify no starting-milestones references in skills/
find skills/ -name "*starting-milestones*" | wc -l  # Should be 0

# Verify adding-milestones exists
ls skills/kata-adding-milestones/SKILL.md

# Verify test file correct
ls tests/skills/adding-milestones.test.js

# Verify no starting-milestones in test file
grep -c "starting-milestones" tests/skills/adding-milestones.test.js  # Should be 0

# Run the test to verify it passes
npm test -- --grep "adding-milestones" 2>/dev/null || echo "Test run requires npm test setup"
```

</verification>

<success_criteria>

- [ ] skills/kata-starting-milestones/ directory deleted
- [ ] tests/skills/starting-milestones.test.js renamed to adding-milestones.test.js
- [ ] Test file references kata-adding-milestones (not starting-milestones)
- [ ] Test prompts use "add milestone" phrasing
- [ ] Static content test checks kata-adding-milestones skill path
- [ ] All changes committed with descriptive message
- [ ] No "starting-milestones" references remain in skills/ or tests/

</success_criteria>

<output>

After completion, create `.planning/phases/02.2-decoupling-project-init-milestone-setup/02.2-03-SUMMARY.md`

</output>
