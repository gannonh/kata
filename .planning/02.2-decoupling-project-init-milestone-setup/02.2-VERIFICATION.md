---
phase: 02.2-decoupling-project-init-milestone-setup
verified: 2026-01-26T10:28:50Z
status: passed
score: 6/6 must-haves verified
---

# Phase 2.2: Decouple Project Init & Milestone Setup Verification Report

**Phase Goal:** Separate project initialization from first milestone creation; establish clear Kata↔GitHub primitive mapping

**Verified:** 2026-01-26T10:28:50Z

**Status:** passed

**Re-verification:** No — initial verification

## Goal Achievement

### Observable Truths

| # | Truth | Status | Evidence |
| --- | ------- | ---------- | -------------- |
| 1 | starting-projects creates only PROJECT.md and config.json | ✓ VERIFIED | SKILL.md "Creates:" section lists only 2 artifacts; test suite expects no ROADMAP.md |
| 2 | starting-projects does NOT create ROADMAP.md, REQUIREMENTS.md, or research/ | ✓ VERIFIED | No Phase 6-8 in SKILL.md; test file header explicitly states these are handled by add-milestone |
| 3 | New add-milestone skill exists (renamed from starting-milestones) | ✓ VERIFIED | skills/kata-adding-milestones/ exists; kata-starting-milestones/ does NOT exist |
| 4 | add-milestone creates ROADMAP.md with milestone definition | ✓ VERIFIED | Objective states "Creates/Updates: .planning/ROADMAP.md"; Phase 8 creates ROADMAP via roadmapper agent |
| 5 | add-milestone creates GitHub Milestone when github.enabled=true | ✓ VERIFIED | Phase 5.5 contains gh api milestones call with remote validation |
| 6 | Kata↔GitHub mapping documented | ✓ VERIFIED | references/github-mapping.md exists with complete mapping table |
| 7 | After project init, next action prompt is add-milestone | ✓ VERIFIED | Phase 6 (Done) displays "Next Up" section with /kata:add-milestone command |

**Score:** 7/7 truths verified (100%)

### Required Artifacts

| Artifact | Expected | Status | Details |
| -------- | ----------- | ------ | ------- |
| `skills/kata-starting-projects/SKILL.md` | Reduced scope (PROJECT.md + config.json only) | ✓ VERIFIED | 765 lines; Creates section lists only 2 artifacts; no Phase 6-8 (removed) |
| `skills/kata-adding-milestones/SKILL.md` | Full milestone flow with renamed skill | ✓ VERIFIED | 809 lines; name: kata-adding-milestones; Phase 5.5 GitHub Milestone creation exists |
| `skills/kata-adding-milestones/references/github-mapping.md` | Kata-GitHub primitive mapping | ✓ VERIFIED | 65 lines; complete mapping table (Milestone→GitHub Milestone, Phase→Issue, Plan→Checklist) |
| `tests/skills/adding-milestones.test.js` | Renamed test targeting new skill | ✓ VERIFIED | 4 references to kata-adding-milestones; 0 references to starting-milestones |
| `tests/skills/starting-projects.test.js` | Updated expectations (no ROADMAP) | ✓ VERIFIED | Header states "PROJECT.md and config.json only"; test "does not create ROADMAP.md (handled by add-milestone)" exists |
| `CLAUDE.md` | Skills table updated | ✓ VERIFIED | Table row: kata-adding-milestones with /kata:adding-milestones invocation |
| `.planning/todos/done/2026-01-18-separate-new-project-from-first-milestone.md` | Completed todo | ✓ VERIFIED | Moved from pending to done |

**Artifact Status:** 7/7 verified (100%)

### Key Link Verification

| From | To | Via | Status | Details |
| ---- | --- | --- | ------ | ------- |
| starting-projects SKILL.md | add-milestone | Next Up prompt | ✓ WIRED | Phase 6 (Done) displays "/kata:add-milestone" in Next Up section (3 references found) |
| adding-milestones SKILL.md | ROADMAP.md | kata-roadmapper agent | ✓ WIRED | Phase 8 spawns kata-roadmapper via Task tool to create ROADMAP.md |
| adding-milestones SKILL.md | GitHub API | gh api call | ✓ WIRED | Phase 5.5 contains "gh api --method POST /repos/:owner/:repo/milestones" with remote validation guard |
| adding-milestones SKILL.md | github-mapping.md | execution_context | ✓ WIRED | execution_context includes @./references/github-mapping.md |
| tests/adding-milestones.test.js | skills/kata-adding-milestones/SKILL.md | cpSync installation | ✓ WIRED | skillSource and skillDest point to kata-adding-milestones |

**Link Status:** 5/5 wired (100%)

### Requirements Coverage

No specific requirements mapped to this phase in REQUIREMENTS.md. This was an urgent insertion (decimal phase 2.2) for architectural improvement.

**Architectural goals achieved:**
- Clear separation of concerns (project setup vs. milestone planning)
- Consistent skill naming (`kata-adding-*` pattern)
- Documented GitHub primitive mapping for future phase/issue work

### Anti-Patterns Found

None detected.

**Verification checks:**
- No TODO/FIXME/XXX/HACK/placeholder comments in starting-projects SKILL.md
- No TODO/FIXME/XXX/HACK/placeholder comments in adding-milestones SKILL.md
- No stub patterns (return null, console.log only, empty handlers)
- Both skills substantive (765 and 809 lines respectively)
- github-mapping.md substantive (65 lines with complete table)

### Human Verification Required

None. All criteria can be verified programmatically through file existence, content checks, and grep patterns.

---

## Detailed Verification Evidence

### Truth 1: starting-projects creates only PROJECT.md and config.json

**SKILL.md "Creates:" section:**
```
**Creates:**
- `.planning/PROJECT.md` — project context
- `.planning/config.json` — workflow preferences
```

**Test header comment:**
```javascript
/**
 * Verifies that the starting-projects skill correctly initializes a new Kata
 * project with PROJECT.md and config.json only.
 *
 * NOTE: ROADMAP.md, REQUIREMENTS.md, and STATE.md are created by
 * kata-adding-milestones, not starting-projects.
 */
```

**Verification:** ✓ PASS

---

### Truth 2: starting-projects does NOT create ROADMAP.md, REQUIREMENTS.md, research/

**Grep for removed phases:**
```bash
grep -c "Phase 6: Research Decision" skills/kata-starting-projects/SKILL.md  # 0
grep -c "Phase 7: Define Requirements" skills/kata-starting-projects/SKILL.md  # 0
grep -c "Phase 8: Create Roadmap" skills/kata-starting-projects/SKILL.md  # 0
```

**Test verification:**
```javascript
it('does not create ROADMAP.md (handled by add-milestone)', () => {
  // Test explicitly verifies ROADMAP.md is NOT created
  if (existsSync(roadmapPath)) {
    throw new Error('ROADMAP.md should not be created by starting-projects');
  }
});
```

**Verification:** ✓ PASS

---

### Truth 3: New add-milestone skill exists (renamed from starting-milestones)

**Skill directory check:**
```bash
ls skills/ | grep milestone
# Output:
# kata-adding-milestones
# kata-auditing-milestones
# kata-completing-milestones
# kata-planning-milestone-gaps
```

**Frontmatter:**
```yaml
---
name: kata-adding-milestones
description: Use this skill when adding a milestone to an existing project, starting a new milestone cycle, creating the first milestone after project init, or defining what's next after completing work. Triggers include "add milestone", "new milestone", "start milestone", "create milestone", "first milestone", "next milestone", and "milestone cycle".
version: 0.1.0
user-invocable: true
---
```

**Verification:** ✓ PASS (kata-starting-milestones does NOT exist; kata-adding-milestones exists)

---

### Truth 4: add-milestone creates ROADMAP.md with milestone definition

**Objective section:**
```
**Creates/Updates:**
- `.planning/PROJECT.md` — updated with new milestone goals
- `.planning/research/` — domain research (optional, focuses on NEW features)
- `.planning/REQUIREMENTS.md` — scoped requirements for this milestone
- `.planning/ROADMAP.md` — phase structure (creates if first, continues if subsequent)
- `.planning/STATE.md` — reset for new milestone (creates if first)
```

**Phase 8 implementation:**
Process includes roadmapper agent spawn to create ROADMAP.md with milestone definition.

**Verification:** ✓ PASS

---

### Truth 5: add-milestone creates GitHub Milestone when github.enabled=true

**Phase 5.5 implementation:**
```bash
## Phase 5.5: Create GitHub Milestone (if enabled)

Read GitHub config:
GITHUB_ENABLED=$(cat .planning/config.json 2>/dev/null | grep -o '"enabled"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "false")

**If `GITHUB_ENABLED=true`:**

**Step 1: Validate GitHub remote exists**

HAS_GITHUB_REMOTE=$(git remote -v 2>/dev/null | grep -q 'github\.com' && echo "true" || echo "false")

**If `HAS_GITHUB_REMOTE=true`:**
[Contains gh api --method POST /repos/:owner/:repo/milestones call]
```

**Verification:** ✓ PASS (includes remote validation guard from Phase 2.1)

---

### Truth 6: Kata↔GitHub mapping documented

**github-mapping.md exists:**
```bash
ls skills/kata-adding-milestones/references/
# Output includes: github-mapping.md
```

**Content verification:**
```markdown
# Kata-GitHub Primitive Mapping

## Mapping Table

| Kata Concept | GitHub Primitive | Created By | Notes |
| ------------ | ---------------- | ---------- | ----- |
| **Milestone** | GitHub Milestone | `add-milestone` (Phase 5.5) | 1:1 mapping. Version becomes milestone title. |
| **Phase** | GitHub Issue | `planning-phases` (future) | Assigned to corresponding milestone. `phase` label applied. |
| **Plan** | Checklist in Issue body | `executing-phases` (future) | Plans become `- [ ]` items in phase issue body. |
| **Task** | N/A | Not mapped | Tasks are internal execution units, not surfaced to GitHub. |
```

**Verification:** ✓ PASS

---

### Truth 7: After project init, next action prompt is add-milestone

**starting-projects Phase 6 (Done):**
```
## ▶ Next Up

**Define your first milestone**

`/kata:add-milestone` — research, requirements, and roadmap

<sub>`/clear` first → fresh context window</sub>
```

**Reference count:**
```bash
grep -c "add-milestone\|adding-milestones" skills/kata-starting-projects/SKILL.md
# Output: 3
```

**Verification:** ✓ PASS

---

## Summary

**All success criteria met:**

1. ✓ starting-projects creates only PROJECT.md + config.json (no ROADMAP, no requirements)
2. ✓ New add-milestone skill exists (kata-adding-milestones, user-invocable: true)
3. ✓ add-milestone creates ROADMAP.md with first milestone definition
4. ✓ add-milestone creates GitHub Milestone when github.enabled=true (Phase 5.5)
5. ✓ Kata↔GitHub mapping documented in references/github-mapping.md
6. ✓ After project init, next action prompt is /kata:add-milestone

**Phase Goal Achieved:** Project initialization and milestone creation are now cleanly separated. Users follow a clear flow: new-project → add-milestone → plan-phase → execute-phase. GitHub primitive mapping is documented for future integration work (Phase Issues, Plan Sync).

**No gaps found.** All must-haves verified against actual codebase.

---

_Verified: 2026-01-26T10:28:50Z_

_Verifier: Claude (kata-verifier)_
