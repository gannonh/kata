---
milestone: v1.11.0
uat_started: 2026-02-14T19:30:00Z
uat_completed: 2026-02-14T20:15:00Z
status: gaps_found
source:
  - .planning/phases/completed/49-script-layer-phase-worktrees/49-01-SUMMARY.md
  - .planning/phases/completed/49-script-layer-phase-worktrees/49-02-SUMMARY.md
  - .planning/phases/completed/50-orchestrator-phase-worktree-lifecycle/50-01-SUMMARY.md
  - .planning/phases/completed/50-orchestrator-phase-worktree-lifecycle/50-02-SUMMARY.md
  - .planning/phases/completed/51-workspace-worktree-architecture/51-01-SUMMARY.md
  - .planning/phases/completed/51-workspace-worktree-architecture/51-02-SUMMARY.md
  - .planning/phases/completed/51-workspace-worktree-architecture/51-03-SUMMARY.md
  - .planning/phases/completed/52-documentation-worktree-structure/52-01-SUMMARY.md
test_projects:
  - /Users/gannonhall/dev/kata/kata-burner/test-greenfield-20260211-114054
  - /Users/gannonhall/dev/kata/kata-cloud (live project, observed issues)
---

# UAT: v1.11.0 Phase-Level Worktrees

## Batch 1: Workspace Layout (test-greenfield project)

| # | Scenario | Expected | Status |
|---|----------|----------|--------|
| S1 | workspace/ is persistent working directory | workspace/ exists alongside main/ | PASS |
| S2 | main/ stays on main branch | `git -C main branch --show-current` returns `main` | PASS |
| S3 | workspace/ is on phase branch during execution | workspace/ on `feat/v1.1-03-file-i-o-foundation` | PASS |

## Batch 2: Phase PR Merge + Cleanup (kata-cloud project, observed)

| # | Scenario | Expected | Status |
|---|----------|----------|--------|
| S4 | Merge Phase PR | PR merges successfully | FAIL |
| S5 | After cleanup, workspace/ resets | workspace/ on workspace-base, main/ on main | FAIL |

### S4 Failure Details

`gh pr merge --merge --delete-branch` (suggested by SKILL.md offer_next) fails:
```
fatal: 'main' is already used by worktree at '/path/to/project/main'
```

The `--delete-branch` flag triggers a local `git checkout main` which conflicts with the `main/` worktree.

### S5 Failure Details

Claude had no knowledge of workspace-base or the cleanup-phase script. After PR merge, it attempted:
1. `git checkout main && git pull` (failed: main used by worktree)
2. `gh api` merge (workaround, not the intended flow)
3. `git merge origin/main` (failed: remote ref resolution)

User had to explain workspace-base and the correct flow.

## Gaps Found

See `.planning/v1.11.0-MILESTONE-AUDIT.md` for full gap analysis.

Summary:
1. **`gh pr merge --delete-branch` incompatible with bare repo worktrees** (SKILL.md lines 563, 598)
2. **Post-merge cleanup (workspace-base reset) not surfaced to Claude** (offer_next missing cleanup steps)
3. **Remote ref resolution differs in bare repos** (minor, affects manual git only)
