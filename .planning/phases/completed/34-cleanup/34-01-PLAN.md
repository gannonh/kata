---
phase: 34-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - CLAUDE.md
  - KATA-STYLE.md
  - README.md
  - scripts/build.js
autonomous: true
source_issue: ""

must_haves:
  truths:
    - CLAUDE.md describes skill resources as the agent instruction mechanism (no mention of agents/ directory)
    - KATA-STYLE.md documents skill resource patterns and fresh context via skill-spawned subagents
    - README.md orchestration table uses accurate terminology
    - Build script has no misleading comments about agent namespacing
  artifacts:
    - Updated CLAUDE.md with skill resource architecture
    - Updated KATA-STYLE.md with current patterns
    - Updated README.md orchestration table
    - Cleaned build.js comment
  key_links:
    - CLAUDE.md "Core Architecture" bullet list must not reference agents/ directory
    - CLAUDE.md skills table must not have "Sub-agents Spawned" column referencing agent names
    - KATA-STYLE.md "State Preservation" must not reference agent-history.json
---

<objective>
Update all documentation to reflect that agent instructions live as skill resources, not in a separate agents/ directory.

Purpose: CLAUDE.md, KATA-STYLE.md, and README.md contain stale references to `agents/kata-*.md` files and the old custom subagent type pattern. These references confuse future Claude instances about the architecture.

Output: Updated documentation files describing the current skill resource pattern.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update CLAUDE.md architecture and skills documentation</name>
  <files>CLAUDE.md</files>
  <action>
Update these specific sections:

1. **Line 11** — Replace `- **Agents** (`agents/kata-*.md`) — Specialized subagents spawned by skills for specific tasks (planning, execution, verification, debugging)` with `- **Skill Resources** (`skills/kata-*/references/`) — Agent instructions inlined into subagent prompts at spawn time`

2. **Lines 76-86** — Replace the "Multi-Agent Orchestration" section. Remove the orchestrator table that lists specific agent names (kata-phase-researcher, kata-planner, etc.) and the "subagents get fresh 200k tokens" note. Replace with a description of the current pattern: Skills are orchestrators that spawn general-purpose subagents with instructions inlined from `references/` directories. Each subagent gets a fresh 200k context window. Keep the section concise.

3. **Lines 107-115** — Remove the "Sub-agents Spawned" column from the Available Skills table. Keep only the Skill, Invocation, and Purpose columns.

4. **Line 144** — Replace `Skills ARE orchestrators. They spawn sub-agents via Task tool, not the other way around.` with `Skills ARE orchestrators. They spawn general-purpose subagents via Task tool, inlining instructions from their `references/` directory.`

Do NOT change any other sections. Preserve all formatting and structure outside these specific areas.
  </action>
  <verify>grep -c "agents/kata-" CLAUDE.md returns 0. grep "Skill Resources" CLAUDE.md returns the new architecture bullet. grep "Sub-agents Spawned" CLAUDE.md returns no matches.</verify>
  <done>CLAUDE.md has zero references to agents/ directory or specific agent names in the architecture/skills sections. Architecture bullet describes skill resources. Skills table has no "Sub-agents Spawned" column.</done>
</task>

<task type="auto">
  <name>Task 2: Update KATA-STYLE.md, README.md, and build.js</name>
  <files>KATA-STYLE.md, README.md, scripts/build.js</files>
  <action>
**KATA-STYLE.md:**

1. **Line 39** — Replace `**Skills ARE orchestrators.** They spawn sub-agents via Task tool.` with `**Skills ARE orchestrators.** They spawn general-purpose subagents via Task tool, inlining instructions from `references/`.`

2. **Line 258** — Replace `Use subagents for autonomous work. Reserve main context for user interaction.` with `Spawn general-purpose subagents with inlined instructions for autonomous work. Reserve main context for user interaction.`

3. **Line 263** — Remove `- `agent-history.json` — Subagent tracking for resume` entirely. This file is no longer part of the architecture.

**README.md:**

1. **Lines 429-438** — The Multi-Agent Orchestration table uses "Agents" column header and lists "4 parallel researchers", "Planner", "checker", "executors", "Verifier", "debuggers". Update the column header from "Agents" to "Subagents" and keep the descriptions generic: no need to change the descriptive text since it refers to roles not file-based agent types.

**scripts/build.js:**

1. **Lines 149-158** — The `transformPluginPaths` function has a JSDoc comment mentioning "Agent instructions are inlined via skill resources, so no agent namespacing transform is needed." Simplify the comment to just say "No path transforms needed for plugin distribution." Remove the agent-specific explanation since it's now obvious.
  </action>
  <verify>grep "agent-history.json" KATA-STYLE.md returns no matches. grep "sub-agents via Task tool\." KATA-STYLE.md returns no matches (should now include "inlining" language). grep "Subagents" README.md finds the updated column header.</verify>
  <done>KATA-STYLE.md references skill resource pattern. README.md orchestration table updated. build.js comment simplified.</done>
</task>

</tasks>

<verification>
- `grep -r "agents/kata-" CLAUDE.md KATA-STYLE.md README.md` returns no results
- `grep "agent-history.json" KATA-STYLE.md` returns no results
- `grep "Sub-agents Spawned" CLAUDE.md` returns no results
- All files parse as valid Markdown
</verification>

<success_criteria>
- CLAUDE.md architecture section describes skill resources pattern
- CLAUDE.md skills table has no agent names column
- KATA-STYLE.md uses current terminology
- README.md orchestration table is accurate
- build.js has no misleading agent comments
</success_criteria>

<output>
After completion, create `.planning/phases/pending/34-cleanup/34-01-SUMMARY.md`
</output>
