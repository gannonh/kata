---
phase: 34-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["34-01"]
files_modified: []
autonomous: true
source_issue: ""

must_haves:
  truths:
    - Plugin builds without errors
    - All existing tests pass
    - Built plugin contains only skills, hooks, and CHANGELOG.md (no agents/ artifacts)
  artifacts:
    - Clean dist/plugin/ build output
    - Passing test suite
  key_links:
    - npm run build:plugin succeeds
    - npm test passes
    - dist/plugin/ contains no agents/ directory
---

<objective>
Build the plugin and run the full test suite to confirm no regressions from documentation changes.

Purpose: CLEAN-04 requires verifying the full workflow works. Since CLEAN-01/CLEAN-02 were already done in Phase 31, this plan validates the final state after documentation cleanup.

Output: Verified build and test results confirming the plugin works correctly.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build plugin and run test suite</name>
  <files></files>
  <action>
Run the following commands in sequence:

1. `npm run build:plugin` — Build the plugin distribution
2. `npm test` — Run the full test suite
3. Verify `dist/plugin/` contains no `agents/` directory: `ls dist/plugin/agents/ 2>&1` should fail
4. Verify `dist/plugin/skills/` exists and contains skill directories
5. Verify no `agents/kata-` references remain in built output: `grep -r "agents/kata-" dist/plugin/ || echo "clean"`

If any step fails, report the failure details.
  </action>
  <verify>npm run build:plugin exits 0. npm test exits 0. ls dist/plugin/agents/ returns "No such file or directory". grep -r "agents/kata-" dist/plugin/ returns no matches.</verify>
  <done>Plugin builds cleanly, all tests pass, no agent artifacts in build output.</done>
</task>

</tasks>

<verification>
- `npm run build:plugin` succeeds
- `npm test` succeeds
- `dist/plugin/` has no agents/ directory
- `dist/plugin/skills/` exists with skill subdirectories
</verification>

<success_criteria>
- Build exits 0 with no validation errors
- All tests pass
- Build output is clean of legacy agent artifacts
</success_criteria>

<output>
After completion, create `.planning/phases/pending/34-cleanup/34-02-SUMMARY.md`
</output>
