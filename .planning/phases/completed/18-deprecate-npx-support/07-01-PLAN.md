---
phase: 07-deprecate-npx-support
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-adding-milestones/SKILL.md
  - skills/kata-adding-phases/SKILL.md
  - skills/kata-adding-todos/SKILL.md
  - skills/kata-auditing-milestones/SKILL.md
  - skills/kata-checking-todos/SKILL.md
  - skills/kata-completing-milestones/SKILL.md
  - skills/kata-configuring-settings/SKILL.md
  - skills/kata-debugging/SKILL.md
  - skills/kata-discussing-phases/SKILL.md
  - skills/kata-executing-phases/SKILL.md
  - skills/kata-executing-quick-tasks/SKILL.md
  - skills/kata-insert-phase/SKILL.md
  - skills/kata-listing-phase-assumptions/SKILL.md
  - skills/kata-mapping-codebases/SKILL.md
  - skills/kata-pausing-work/SKILL.md
  - skills/kata-planning-milestone-gaps/SKILL.md
  - skills/kata-planning-phases/SKILL.md
  - skills/kata-providing-help/SKILL.md
  - skills/kata-removing-phases/SKILL.md
  - skills/kata-researching-phases/SKILL.md
  - skills/kata-resuming-work/SKILL.md
  - skills/kata-reviewing-pull-requests/SKILL.md
  - skills/kata-setting-profiles/SKILL.md
  - skills/kata-showing-whats-new/SKILL.md
  - skills/kata-starting-projects/SKILL.md
  - skills/kata-tracking-progress/SKILL.md
  - skills/kata-verifying-work/SKILL.md
autonomous: true

must_haves:
  truths:
    - "All skill directories have kata- prefix removed"
    - "All SKILL.md frontmatter name fields have kata- prefix removed"
    - "Skills are accessible as /kata:skill-name after plugin build"
  artifacts:
    - path: "skills/adding-milestones/SKILL.md"
      provides: "Renamed skill directory"
      contains: "name: adding-milestones"
    - path: "skills/executing-phases/SKILL.md"
      provides: "Renamed skill directory"
      contains: "name: executing-phases"
  key_links:
    - from: "skills/*/SKILL.md"
      to: "frontmatter name field"
      via: "directory name matches frontmatter name"
      pattern: "name: [a-z-]+"
---

<objective>
Rename all 27 skill directories by removing the `kata-` prefix.

Purpose: Plugin build already strips the prefix from directories (via `renameSkillDir()`) and from the `name:` frontmatter field (via `transformSkillName()`). By renaming in source, we simplify build.js and make source match distribution.

Output: 27 skill directories renamed, each SKILL.md frontmatter `name:` field updated.
</objective>

<execution_context>
The build.js `renameSkillDir()` and `transformSkillName()` functions currently do this transformation at build time. After this plan, source directories will already have the final form, so those build transforms become no-ops (and can be removed in a later plan).
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Skills directory: `skills/`
Total skills to rename: 27 (excluding kata-updating which is deleted in 07-02)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename skill directories and update frontmatter</name>
  <files>
    skills/kata-* -> skills/*
  </files>
  <action>
Run the following bash script to rename all 27 skill directories and update their frontmatter atomically (each skill completes before the next begins):

```bash
cd /Users/gannonhall/dev/oss/kata

for skill in adding-milestones adding-phases adding-todos auditing-milestones checking-todos completing-milestones configuring-settings debugging discussing-phases executing-phases executing-quick-tasks inserting-phases listing-phase-assumptions mapping-codebases pausing-work planning-milestone-gaps planning-phases providing-help removing-phases researching-phases resuming-work reviewing-pull-requests setting-profiles showing-whats-new starting-projects tracking-progress verifying-work; do
  echo "Processing: $skill"
  git mv "skills/kata-$skill" "skills/$skill"
  sed -i '' "s/^name: kata-$skill$/name: $skill/" "skills/$skill/SKILL.md"
done
```

This script:
1. Iterates through all 27 skill names
2. For each skill: git mv the directory, then sed to update frontmatter
3. Atomic per skill (if one fails, previous ones are still done)

Skip kata-updating - it is deleted in 07-02.
  </action>
  <verify>
```bash
# Verify no kata-* directories remain (except kata-updating which is handled in 07-02)
ls skills/ | grep -E "^kata-" | grep -v kata-updating
# Should return only kata-updating

# Verify all renamed directories exist
ls skills/adding-milestones skills/executing-phases skills/planning-phases 2>/dev/null && echo "OK"

# Verify frontmatter updated (sample check)
grep "^name:" skills/adding-milestones/SKILL.md
# Should show: name: adding-milestones
```
  </verify>
  <done>27 skill directories renamed (kata-* -> *), each SKILL.md frontmatter name field updated to match</done>
</task>

<task type="auto">
  <name>Task 2: Update internal Skill() invocations</name>
  <files>
    skills/*/SKILL.md
    skills/*/references/*.md
  </files>
  <action>
Search for any `Skill("kata-` invocations within skill files and update them to `Skill("kata:` (the plugin namespace format).

The build.js already transforms these: `Skill("kata-xxx")` -> `Skill("kata:xxx")`. Since we're removing the prefix from source, any internal skill-to-skill references need to use the plugin namespace format.

Search pattern: `Skill\("kata-`
Replace with: `Skill("kata:`

Note: Most skills don't call other skills directly, so this may find zero matches.
  </action>
  <verify>
```bash
# Verify no Skill("kata- invocations remain
grep -r 'Skill("kata-' skills/
# Should return nothing
```
  </verify>
  <done>All internal Skill() invocations use plugin namespace format (kata:skillname)</done>
</task>

</tasks>

<verification>
- [ ] `ls skills/ | wc -l` returns 28 (27 renamed + 1 kata-updating)
- [ ] `ls skills/ | grep -E "^kata-"` returns only "kata-updating"
- [ ] `grep -l "^name: kata-" skills/*/SKILL.md` returns only kata-updating
- [ ] `npm run build:plugin` succeeds
</verification>

<success_criteria>
1. All 27 retained skill directories have kata- prefix removed
2. All 27 SKILL.md frontmatter name fields have kata- prefix removed
3. Any internal Skill() references use plugin namespace format
4. Build succeeds with renamed skills
</success_criteria>

<output>
After completion, create `.planning/phases/07-deprecate-npx-support/07-01-SUMMARY.md`
</output>
