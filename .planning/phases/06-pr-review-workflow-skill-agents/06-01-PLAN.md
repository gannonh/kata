---
phase: 06-pr-review-workflow-skill-agents
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-reviewing-prs/SKILL.md
  - skills/kata-reviewing-prs/references/code-reviewer.md
  - skills/kata-reviewing-prs/references/test-analyzer.md
  - skills/kata-reviewing-prs/references/silent-failure-hunter.md
  - skills/kata-reviewing-prs/references/type-design-analyzer.md
  - skills/kata-reviewing-prs/references/comment-analyzer.md
  - skills/kata-reviewing-prs/references/code-simplifier.md
autonomous: true

must_haves:
  truths:
    - "User can invoke PR review skill via /kata:reviewing-prs (plugin) or /kata-reviewing-prs (npx)"
    - "All 6 review aspects are available: code, tests, errors, types, comments, simplify"
    - "Skill follows Kata naming conventions and frontmatter patterns"
  artifacts:
    - path: "skills/kata-reviewing-prs/SKILL.md"
      provides: "PR review orchestration skill"
      min_lines: 100
    - path: "skills/kata-reviewing-prs/references/code-reviewer.md"
      provides: "Code review agent reference"
      min_lines: 40
    - path: "skills/kata-reviewing-prs/references/test-analyzer.md"
      provides: "Test coverage agent reference"
      min_lines: 40
  key_links:
    - from: "skills/kata-reviewing-prs/SKILL.md"
      to: "references/*.md"
      via: "file path references"
      pattern: "references/"
---

<objective>
Import the existing pr-reviews skill from ~/.claude/skills/pr-reviews/ and adapt it to Kata conventions.

Purpose: Integrate comprehensive PR review capabilities into Kata, enabling code quality checks across 6 dimensions.
Output: Complete skill at skills/kata-reviewing-prs/ with all reference files.
</objective>

<execution_context>
@./references/execute-plan.md
@./references/summary-template.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Source files to import:
- ~/.claude/skills/pr-reviews/SKILL.md
- ~/.claude/skills/pr-reviews/references/code-reviewer.md
- ~/.claude/skills/pr-reviews/references/test-analyzer.md
- ~/.claude/skills/pr-reviews/references/silent-failure-hunter.md
- ~/.claude/skills/pr-reviews/references/type-design-analyzer.md
- ~/.claude/skills/pr-reviews/references/comment-analyzer.md
- ~/.claude/skills/pr-reviews/references/code-simplifier.md

Reference existing Kata skill for conventions:
@skills/kata-executing-phases/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skill directory and import reference files</name>
  <files>
    skills/kata-reviewing-prs/references/code-reviewer.md,
    skills/kata-reviewing-prs/references/test-analyzer.md,
    skills/kata-reviewing-prs/references/silent-failure-hunter.md,
    skills/kata-reviewing-prs/references/type-design-analyzer.md,
    skills/kata-reviewing-prs/references/comment-analyzer.md,
    skills/kata-reviewing-prs/references/code-simplifier.md
  </files>
  <action>
    1. Create skill directory: `mkdir -p skills/kata-reviewing-prs/references`
    2. Read each reference file from ~/.claude/skills/pr-reviews/references/
    3. Copy each reference file to skills/kata-reviewing-prs/references/ without modifications
       - The reference files are agent specifications and don't need Kata-specific changes
       - They work by describing agent behavior, not by being separate agent .md files
  </action>
  <verify>ls -la skills/kata-reviewing-prs/references/ shows all 6 agent reference files</verify>
  <done>All 6 agent reference files exist in skills/kata-reviewing-prs/references/</done>
</task>

<task type="auto">
  <name>Task 2: Create adapted SKILL.md with Kata conventions</name>
  <files>skills/kata-reviewing-prs/SKILL.md</files>
  <action>
    Read ~/.claude/skills/pr-reviews/SKILL.md as the base, then adapt:

    1. Update frontmatter:
       - name: kata-reviewing-prs (gerund form per Kata conventions)
       - description: Expand with Kata-specific trigger phrases: "review my PR", "check code quality", "review changes", "code review", "PR review", "check tests", "review before commit", "review before PR", "check error handling", "analyze types", "simplify code", "review this phase"
       - Add version: 0.1.0
       - Add user-invocable: true (explicit, though default)
       - Add allowed-tools: Read, Grep, Glob, Bash(git:*), Bash(gh:*)

    2. Update content:
       - Add `<user_command>/kata:reviewing-prs</user_command>` after frontmatter
       - Keep the workflow structure (determine scope, select aspects, launch agents, aggregate, action plan)
       - Update usage examples from `/pr-reviews` to `/kata:reviewing-prs` (plugin) or `/kata-reviewing-prs` (npx)
       - Keep the review aspects table, applicability table, and output format
       - Update reference paths from `references/` to `./references/` for relative clarity

    3. Add Kata workflow integration section:
       - Before phase execution: run targeted review on staged changes
       - Before PR creation: run full review
       - After plan execution: quick code + errors check
       - During phase verification: can be invoked manually

    The skill orchestrates by spawning Task subagents for each review aspect, NOT by being a subagent itself.
  </action>
  <verify>cat skills/kata-reviewing-prs/SKILL.md shows updated frontmatter with kata-reviewing-prs name and Kata trigger phrases</verify>
  <done>SKILL.md exists with Kata naming, expanded triggers, and updated usage examples</done>
</task>

</tasks>

<verification>
- [ ] `ls skills/kata-reviewing-prs/` shows SKILL.md and references/ directory
- [ ] `ls skills/kata-reviewing-prs/references/` shows 6 .md files
- [ ] `grep "name: kata-reviewing-prs" skills/kata-reviewing-prs/SKILL.md` returns match
- [ ] `grep "/kata:reviewing-prs" skills/kata-reviewing-prs/SKILL.md` shows updated usage examples
</verification>

<success_criteria>
- Skill directory exists at skills/kata-reviewing-prs/
- SKILL.md follows Kata frontmatter conventions (name, description, version, allowed-tools)
- All 6 agent reference files copied to references/
- Usage examples updated for Kata invocation syntax
- Skill can be invoked as /kata:reviewing-prs (plugin) or /kata-reviewing-prs (npx)
</success_criteria>

<output>
After completion, create `.planning/phases/06-pr-review-workflow-skill-agents/06-01-SUMMARY.md`
</output>
