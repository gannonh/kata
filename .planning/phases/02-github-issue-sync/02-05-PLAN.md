---
phase: 02-github-issue-sync
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/check-issues/SKILL.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "When 'Work on it now' is used on a GitHub-linked issue, the issue is assigned to the current user"
    - "Self-assignment is non-blocking (GitHub failure does not block local workflow)"
    - "Assignment uses @me shorthand (current authenticated gh user)"
  artifacts:
    - path: "skills/check-issues/SKILL.md"
      provides: "Self-assignment on work start"
      contains: "gh issue edit.*add-assignee.*@me"
  key_links:
    - from: "skills/check-issues/SKILL.md"
      to: "GitHub Issue"
      via: "gh issue edit --add-assignee"
      pattern: 'gh issue edit.*--add-assignee @me'
---

<objective>
Assign GitHub Issue to current user when "Work on it now" is selected.

Purpose: Complete ownership tracking - when starting work on an issue, the assignee should reflect who is working on it.
Output: Updated check-issues skill that assigns GitHub Issues to @me when starting work.
</objective>

<execution_context>
Gap closure for UAT finding:
- UAT Issue #4: "Missing self-assignment on GitHub"
- Design: Add `gh issue edit --add-assignee @me` alongside the existing label sync
- Non-blocking: GitHub failures should warn but not block local workflow
</execution_context>

<context>
@.planning/phases/02-github-issue-sync/02-UAT.md
@skills/check-issues/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add self-assignment to check-issues skill</name>
  <files>skills/check-issues/SKILL.md</files>
  <action>
Modify the `execute_action` step in skills/check-issues/SKILL.md.

**Path 1: Work on it now (open local issue)**

Find the "Work on it now (open local issue)" section where the in-progress label logic was added (02-04-PLAN).
Add self-assignment AFTER the label logic, within the same `if [ "$GITHUB_ENABLED" = "true" ]` block:

```bash
if [ "$GITHUB_ENABLED" = "true" ]; then
  # Create in-progress label idempotently (ignore error if exists)
  gh label create "in-progress" --description "Issue is actively being worked on" --color "FFA500" 2>/dev/null || true

  # Add in-progress label (keeps backlog label)
  gh issue edit "$ISSUE_NUMBER" --add-label "in-progress" 2>/dev/null \
    && echo "Added in-progress label to GitHub Issue #${ISSUE_NUMBER}" \
    || echo "Warning: Failed to add in-progress label to GitHub Issue #${ISSUE_NUMBER}"

  # Assign issue to self
  gh issue edit "$ISSUE_NUMBER" --add-assignee @me 2>/dev/null \
    && echo "Assigned GitHub Issue #${ISSUE_NUMBER} to @me" \
    || echo "Warning: Failed to assign GitHub Issue #${ISSUE_NUMBER}"
fi
```

**Path 2: Work on it now (GitHub-only issue)**

Find the "Work on it now (GitHub-only issue)" section where the in-progress label logic was added (02-04-PLAN).
Add self-assignment AFTER the label logic, within the same `if [ "$GITHUB_ENABLED" = "true" ]` block:

```bash
if [ "$GITHUB_ENABLED" = "true" ]; then
  # Create in-progress label idempotently (ignore error if exists)
  gh label create "in-progress" --description "Issue is actively being worked on" --color "FFA500" 2>/dev/null || true

  # Add in-progress label (keeps backlog label)
  # Note: $ISSUE_NUMBER is already available from the pull-to-local step
  gh issue edit "$ISSUE_NUMBER" --add-label "in-progress" 2>/dev/null \
    && echo "Added in-progress label to GitHub Issue #${ISSUE_NUMBER}" \
    || echo "Warning: Failed to add in-progress label to GitHub Issue #${ISSUE_NUMBER}"

  # Assign issue to self
  gh issue edit "$ISSUE_NUMBER" --add-assignee @me 2>/dev/null \
    && echo "Assigned GitHub Issue #${ISSUE_NUMBER} to @me" \
    || echo "Warning: Failed to assign GitHub Issue #${ISSUE_NUMBER}"
fi
```

**Both paths: Update confirmation display** to show assignment status:
```
Issue moved to in-progress: [filename]

  [title]
  Area: [area]
  GitHub: Linked to #[number], added in-progress label, assigned to @me
          -or- Not linked (if no provenance)
```

**Update success_criteria checklist** (around line 545-559) to include:
- [ ] "Work on it now" assigns GitHub Issue to @me (if linked)
  </action>
  <verify>
1. Read skills/check-issues/SKILL.md
2. Verify `gh issue edit.*--add-assignee @me` pattern exists in BOTH "Work on it now" sections
3. Verify assignment appears in both "Work on it now" sections (local and GitHub-only)
4. Verify confirmation messages mention assignment status
  </verify>
  <done>
- "Work on it now" action assigns issue to @me via gh issue edit
- Both local issue and GitHub-only issue paths have explicit assignment bash code
- Confirmation output mentions assignment status
- Failure is non-blocking (warning only, local workflow continues)
  </done>
</task>

</tasks>

<verification>
After implementation:
1. Check skill file contains `gh issue edit "$ISSUE_NUMBER" --add-assignee @me` command in both paths
2. Verify pattern exists for both open local and GitHub-only issue paths
3. Verify non-blocking behavior (2>/dev/null with || warning)
</verification>

<success_criteria>
- [ ] skills/check-issues/SKILL.md updated with self-assignment logic
- [ ] Assignment uses @me shorthand
- [ ] Both work-on-it paths (local and GitHub-only) include explicit bash code for assignment
- [ ] Assignment is non-blocking (warning on failure, not error)
- [ ] Confirmation messages updated to show assignment status
</success_criteria>

<output>
After completion, create `.planning/phases/02-github-issue-sync/02-05-SUMMARY.md`
</output>
