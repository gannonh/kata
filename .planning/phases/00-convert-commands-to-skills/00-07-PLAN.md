---
phase: 00-convert-commands-to-skills
plan: 07
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - skills/kata-research/SKILL.md
  - skills/kata-research/references/discovery-levels.md
  - skills/kata-research/references/research-protocol.md
  - skills/kata-research/references/discussion-protocol.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /kata-research skill from natural language"
    - "Skill handles research-phase and discuss-phase workflows"
    - "Skill spawns kata-phase-researcher and kata-research-synthesizer sub-agents"
  artifacts:
    - path: "skills/kata-research/SKILL.md"
      provides: "Research orchestrator skill"
      max_lines: 500
    - path: "skills/kata-research/references/discovery-levels.md"
      provides: "Mandatory discovery protocol (Level 0-3)"
    - path: "skills/kata-research/references/research-protocol.md"
      provides: "Phase research workflow"
  key_links:
    - from: "skills/kata-research/SKILL.md"
      to: "agents/kata-phase-researcher.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-phase-researcher"
    - from: "skills/kata-research/SKILL.md"
      to: "agents/kata-research-synthesizer.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-research-synthesizer"
---

<objective>
Create the kata-research skill for domain and phase research.

Purpose: Handles research-phase for technical investigation and discuss-phase for exploring phase scope with user.

Output: skills/kata-research/ directory with SKILL.md and references/
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

# Skill-building methodology
@~/.claude/skills/building-claude-code-skills/SKILL.md
@~/.claude/skills/building-claude-code-skills/converting-slash-commands-to-skills.md

# Current implementation to extract workflow from
@commands/kata/research-phase.md
@commands/kata/discuss-phase.md
@commands/kata/list-phase-assumptions.md
@agents/kata-phase-researcher.md
@agents/kata-research-synthesizer.md
@kata/workflows/research-phase.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-research skill with references</name>
  <files>
    skills/kata-research/SKILL.md
    skills/kata-research/references/discovery-levels.md
    skills/kata-research/references/research-protocol.md
    skills/kata-research/references/discussion-protocol.md
  </files>
  <action>
Create the kata-research skill following /building-claude-code-skills methodology:

1. Create skills/kata-research/SKILL.md:
   - Frontmatter: name (kata-research), description (trigger-focused, 3rd person)
   - Description includes: "research phase", "investigate", "explore", "discuss phase", "scope discussion", "assumptions", "technical research", "domain research"
   - NO allowed-tools, model, agent, context fields
   - Core workflow (~350 lines max):
     * Determine operation from natural language (research, discuss, assumptions)
     * For RESEARCH phase:
       - Determine discovery level (0-3) based on phase characteristics
       - Spawn kata-phase-researcher for technical investigation
       - Spawn kata-research-synthesizer to consolidate findings
       - Create RESEARCH.md with standard_stack, architecture_patterns, pitfalls
     * For DISCUSS phase:
       - Interactive conversation about phase scope
       - Ask clarifying questions about user intent
       - Identify essential features vs nice-to-haves
       - Create CONTEXT.md capturing user's vision
     * For LIST ASSUMPTIONS:
       - Analyze phase goal and requirements
       - Identify implicit assumptions
       - Generate assumptions list
       - Offer to verify assumptions with user
   - Reference supporting files with relative paths

2. Create references/discovery-levels.md:
   - Level 0: Skip (pure internal work)
   - Level 1: Quick verification (2-5 min)
   - Level 2: Standard research (15-30 min)
   - Level 3: Deep dive (1+ hour)
   - Depth indicators for each level
   - When to suggest full research phase

3. Create references/research-protocol.md:
   - RESEARCH.md structure
   - Standard stack section
   - Architecture patterns section
   - Don't hand-roll section
   - Common pitfalls section
   - State of the art section
   - Sources classification (primary, secondary, tertiary)

4. Create references/discussion-protocol.md:
   - CONTEXT.md structure
   - Question flow for scope clarification
   - Essential features vs nice-to-haves
   - Capturing user's vision
   - Boundary setting

Extract content from:
- commands/kata/research-phase.md (has research workflow)
- commands/kata/discuss-phase.md (has discussion workflow)
- commands/kata/list-phase-assumptions.md (has assumptions analysis)
- agents/kata-phase-researcher.md (has research methodology)
- agents/kata-research-synthesizer.md (has synthesis methodology)
  </action>
  <verify>
    - ls skills/kata-research/ shows SKILL.md and references/ directory
    - wc -l skills/kata-research/SKILL.md shows less than 500 lines
    - grep "name: kata-research" skills/kata-research/SKILL.md returns match
    - grep "Task" skills/kata-research/SKILL.md shows sub-agent spawning
    - ls skills/kata-research/references/ shows 3 files
  </verify>
  <done>
    - SKILL.md exists with proper frontmatter (name, description only)
    - SKILL.md under 500 lines with workflow that spawns kata-phase-researcher, kata-research-synthesizer
    - 3 reference files exist with discovery levels, research protocol, and discussion protocol
  </done>
</task>

</tasks>

<verification>
1. Skill structure follows /building-claude-code-skills methodology
2. SKILL.md has proper frontmatter (name and description only)
3. SKILL.md under 500 lines with workflow referencing ./references/*.md
4. All 3 reference files contain extracted content from command/agent files
</verification>

<success_criteria>
- skills/kata-research/SKILL.md exists with orchestrator workflow
- skills/kata-research/references/ contains 3 reference files
- Skill handles research, discuss, and assumptions operations
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-07-SUMMARY.md`
</output>
