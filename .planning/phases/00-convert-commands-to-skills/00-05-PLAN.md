---
phase: 00-convert-commands-to-skills
plan: 05
type: execute
wave: 2
depends_on: [00-01, 00-02, 00-03, 00-04]
files_modified:
  - skills/kata-milestone-management/SKILL.md
  - skills/kata-milestone-management/references/milestone-lifecycle.md
  - commands/kata/new-milestone.md
  - commands/kata/complete-milestone.md
  - commands/kata/audit-milestone.md
autonomous: true

must_haves:
  truths:
    - "/kata:new-milestone creates milestone structure"
    - "/kata:complete-milestone archives milestone"
    - "Claude autonomously invokes kata-milestone-management for milestone operations"
  artifacts:
    - path: "skills/kata-milestone-management/SKILL.md"
      provides: "Core milestone management workflow"
      min_lines: 100
    - path: "commands/kata/new-milestone.md"
      provides: "Thin wrapper with skills: kata-milestone-management in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/new-milestone.md"
      to: "skills/kata-milestone-management/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-milestone-management"
---

<objective>
Create the kata-milestone-management skill from existing milestone commands.

Purpose: Enable autonomous skill invocation for milestone management while preserving deterministic command execution.

Output: skills/kata-milestone-management/ directory with SKILL.md and references/, updated command frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-milestone-management/` NOT `skills/kata/kata-milestone-management/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/new-milestone.md
@commands/kata/complete-milestone.md
@commands/kata/audit-milestone.md
@kata/workflows/complete-milestone.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-milestone-management skill structure</name>
  <files>
    skills/kata-milestone-management/SKILL.md,
    skills/kata-milestone-management/references/milestone-lifecycle.md
  </files>
  <action>
    Create skills/kata-milestone-management/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~150-200 lines):**
    - Frontmatter: name: kata-milestone-management, description with trigger phrases ("create milestone", "new milestone", "complete milestone", "archive milestone", "audit milestone", "milestone management")
    - Extract core workflow from milestone commands:
      - Milestone concept (version-based groupings of phases)
      - New milestone flow summary
      - Complete milestone flow summary
      - Audit milestone flow summary
    - Reference detailed file in references/
    - Keep under 500 lines

    **references/milestone-lifecycle.md:**
    - Extract from commands and workflow:
      - Milestone creation process
      - Phase association
      - Completion criteria
      - Archival process
      - Audit checks
  </action>
  <verify>
    ls skills/kata-milestone-management/ shows SKILL.md and references/ directory.
    wc -l skills/kata-milestone-management/SKILL.md is between 100-500 lines.
    grep "name: kata-milestone-management" skills/kata-milestone-management/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md and 1 reference file containing milestone management domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update milestone commands with skill references</name>
  <files>
    commands/kata/new-milestone.md,
    commands/kata/complete-milestone.md,
    commands/kata/audit-milestone.md
  </files>
  <action>
    **commands/kata/new-milestone.md (~717 lines currently):**
    - Add `skills: kata-milestone-management` to frontmatter
    - Add `context: fork` to frontmatter
    - Move detailed content to skill
    - Keep orchestrator logic and user interaction points
    - Target ~250-350 lines
    - Add @-reference to skill

    **commands/kata/complete-milestone.md (~136 lines currently):**
    - Add `skills: kata-milestone-management` to frontmatter
    - Keep most content (already small)
    - Add @-reference to skill

    **commands/kata/audit-milestone.md (~258 lines currently):**
    - Add `skills: kata-milestone-management` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill
  </action>
  <verify>
    grep "skills:" commands/kata/new-milestone.md succeeds.
    grep "skills:" commands/kata/complete-milestone.md succeeds.
    grep "skills:" commands/kata/audit-milestone.md succeeds.
    wc -l commands/kata/new-milestone.md is under 400 lines.
  </verify>
  <done>All milestone commands have skills: frontmatter, new-milestone content deduplicated.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-milestone-management/` shows SKILL.md and references/
2. All three milestone commands have `skills:` in frontmatter
3. new-milestone reduced from ~717 to ~250-350 lines
</verification>

<success_criteria>
- [ ] kata-milestone-management skill exists with SKILL.md + 1 reference file
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] new-milestone command has skills: kata-milestone-management in frontmatter
- [ ] complete-milestone command has skills: kata-milestone-management in frontmatter
- [ ] audit-milestone command has skills: kata-milestone-management in frontmatter
- [ ] new-milestone content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-05-SUMMARY.md`
</output>
