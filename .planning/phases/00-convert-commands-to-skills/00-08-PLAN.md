---
phase: 00-convert-commands-to-skills
plan: 08
type: execute
wave: 2
depends_on: [00-01, 00-02, 00-03, 00-04]
files_modified:
  - skills/kata-utility/SKILL.md
  - commands/kata/progress.md
  - commands/kata/debug.md
  - commands/kata/map-codebase.md
  - commands/kata/pause-work.md
  - commands/kata/resume-work.md
  - commands/kata/add-todo.md
  - commands/kata/check-todos.md
  - agents/kata-codebase-mapper.md
autonomous: true

must_haves:
  truths:
    - "/kata:progress shows project progress"
    - "/kata:debug diagnoses issues"
    - "Claude autonomously invokes kata-utility for utility operations"
  artifacts:
    - path: "skills/kata-utility/SKILL.md"
      provides: "Core utility workflows"
      min_lines: 100
    - path: "commands/kata/progress.md"
      provides: "Command with skills: kata-utility in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/progress.md"
      to: "skills/kata-utility/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-utility"
---

<objective>
Create the kata-utility skill from remaining utility commands (progress, debug, map-codebase, session management, todos).

Purpose: Enable autonomous skill invocation for utility operations while preserving deterministic command execution.

Output: skills/kata-utility/ directory with SKILL.md, updated command frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-utility/` NOT `skills/kata/kata-utility/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/progress.md
@commands/kata/debug.md
@commands/kata/map-codebase.md
@commands/kata/pause-work.md
@commands/kata/resume-work.md
@commands/kata/add-todo.md
@commands/kata/check-todos.md
@agents/kata-codebase-mapper.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-utility skill</name>
  <files>
    skills/kata-utility/SKILL.md
  </files>
  <action>
    Create skills/kata-utility/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~150-250 lines):**
    - Frontmatter: name: kata-utility, description with trigger phrases ("check progress", "show status", "debug issue", "diagnose problem", "map codebase", "pause work", "resume work", "add todo", "check todos", "project status")
    - Combine utility workflows from commands:
      - Progress tracking overview
      - Debug/diagnosis overview
      - Codebase mapping overview
      - Session management (pause/resume) overview
      - Todo management overview
    - Keep concise since these are simpler utilities
    - No separate references/ needed (utilities are straightforward)
  </action>
  <verify>
    ls skills/kata-utility/ shows SKILL.md.
    wc -l skills/kata-utility/SKILL.md is between 100-300 lines.
    grep "name: kata-utility" skills/kata-utility/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md containing utility domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update utility commands with skill references</name>
  <files>
    commands/kata/progress.md,
    commands/kata/debug.md,
    commands/kata/map-codebase.md,
    commands/kata/pause-work.md,
    commands/kata/resume-work.md,
    commands/kata/add-todo.md,
    commands/kata/check-todos.md,
    agents/kata-codebase-mapper.md
  </files>
  <action>
    **commands/kata/progress.md (~356 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Move detailed content to skill
    - Target ~200-250 lines
    - Add @-reference to skill

    **commands/kata/debug.md (~149 lines):**
    - Add `skills: kata-utility, kata-verification` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **commands/kata/map-codebase.md (~71 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Keep all content (already small)
    - Add @-reference to skill

    **commands/kata/pause-work.md (~123 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Keep all content (already small)
    - Add @-reference to skill

    **commands/kata/resume-work.md (~40 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Keep all content (already minimal)
    - Add @-reference to skill

    **commands/kata/add-todo.md (~182 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **commands/kata/check-todos.md (~217 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **agents/kata-codebase-mapper.md (~738 lines):**
    - Add `skills: kata-utility` to frontmatter
    - Remove detailed content that now lives in skill
    - Keep: role, mapping process summary, structured returns
    - Target ~250-350 lines
  </action>
  <verify>
    grep "skills:" commands/kata/progress.md succeeds.
    grep "skills:" commands/kata/debug.md succeeds.
    grep "skills:" commands/kata/map-codebase.md succeeds.
    grep "skills:" commands/kata/pause-work.md succeeds.
    grep "skills:" commands/kata/resume-work.md succeeds.
    grep "skills:" commands/kata/add-todo.md succeeds.
    grep "skills:" commands/kata/check-todos.md succeeds.
    grep "skills:" agents/kata-codebase-mapper.md succeeds.
    wc -l agents/kata-codebase-mapper.md is under 400 lines.
  </verify>
  <done>All utility commands and agent have skills: frontmatter.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-utility/` shows SKILL.md
2. All seven utility commands have `skills:` in frontmatter
3. kata-codebase-mapper agent has `skills:` in frontmatter
4. Agent reduced from ~738 to ~250-350 lines
</verification>

<success_criteria>
- [ ] kata-utility skill exists with SKILL.md
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] All utility commands have skills: kata-utility in frontmatter
- [ ] kata-codebase-mapper agent has skills: kata-utility in frontmatter
- [ ] Agent content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-08-SUMMARY.md`
</output>
