---
phase: 00-convert-commands-to-skills
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-project-initialization/SKILL.md
  - skills/kata-project-initialization/references/onboarding-flow.md
  - skills/kata-project-initialization/references/project-structure.md
  - commands/kata/new-project.md
  - agents/kata-project-researcher.md
autonomous: true

must_haves:
  truths:
    - "/kata:new-project creates project structure with PROJECT.md, ROADMAP.md, STATE.md"
    - "Claude autonomously invokes kata-project-initialization when asked to start a new project"
    - "kata-project-researcher agent has access to initialization skill knowledge"
  artifacts:
    - path: "skills/kata-project-initialization/SKILL.md"
      provides: "Core project initialization workflow with trigger-focused description"
      min_lines: 150
    - path: "skills/kata-project-initialization/references/onboarding-flow.md"
      provides: "User onboarding questions and flow"
      min_lines: 50
    - path: "commands/kata/new-project.md"
      provides: "Thin wrapper with skills: kata-project-initialization in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/new-project.md"
      to: "skills/kata-project-initialization/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-project-initialization"
---

<objective>
Create the kata-project-initialization skill from existing new-project command and kata-project-researcher agent content.

Purpose: Enable autonomous skill invocation for project initialization while preserving deterministic /kata:new-project execution.

Output: skills/kata-project-initialization/ directory with SKILL.md and references/, updated command and agent frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-project-initialization/` NOT `skills/kata/kata-project-initialization/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/new-project.md
@agents/kata-project-researcher.md
@kata/templates/project.md
@kata/templates/roadmap.md
@kata/templates/state.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-project-initialization skill structure</name>
  <files>
    skills/kata-project-initialization/SKILL.md,
    skills/kata-project-initialization/references/onboarding-flow.md,
    skills/kata-project-initialization/references/project-structure.md
  </files>
  <action>
    Create skills/kata-project-initialization/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~200-300 lines):**
    - Frontmatter: name: kata-project-initialization, description with trigger phrases ("start new project", "initialize kata", "create project structure", "set up planning", "new kata project")
    - Extract core workflow from new-project.md:
      - Project initialization philosophy (solo dev + Claude, no enterprise)
      - Core artifacts overview (PROJECT.md, ROADMAP.md, STATE.md, REQUIREMENTS.md)
      - Onboarding flow summary
      - Directory structure overview
    - Reference detailed files in references/
    - Keep under 500 lines

    **references/onboarding-flow.md:**
    - Extract from new-project.md:
      - User questioning flow (vision, goals, constraints)
      - Domain research triggers
      - Requirements gathering patterns
      - First milestone scoping

    **references/project-structure.md:**
    - Extract from templates and new-project.md:
      - .planning/ directory structure
      - File purposes (PROJECT.md, ROADMAP.md, STATE.md, REQUIREMENTS.md)
      - Template usage patterns
      - Config options
  </action>
  <verify>
    ls skills/kata-project-initialization/ shows SKILL.md and references/ directory.
    wc -l skills/kata-project-initialization/SKILL.md is between 150-500 lines.
    grep "name: kata-project-initialization" skills/kata-project-initialization/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md and 2 reference files containing project initialization domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update new-project command and project-researcher agent</name>
  <files>
    commands/kata/new-project.md,
    agents/kata-project-researcher.md
  </files>
  <action>
    **commands/kata/new-project.md:**
    - Add `skills: kata-project-initialization` to frontmatter
    - Add `context: fork` to frontmatter
    - This is the largest command (~900 lines) - significant reduction needed
    - Keep: core orchestrator flow, user interaction points
    - Move to skill: detailed templates, extensive examples, philosophy
    - Target ~300-400 lines for command
    - Add @-reference to skill

    **agents/kata-project-researcher.md:**
    - Add `skills: kata-project-initialization, kata-research` to frontmatter
    - Remove content that now lives in skill
    - Keep: role, research methodology summary, structured returns
    - Target ~300-400 lines (down from ~865)
  </action>
  <verify>
    grep "skills:" commands/kata/new-project.md succeeds.
    grep "skills:" agents/kata-project-researcher.md succeeds.
    wc -l commands/kata/new-project.md is under 500 lines.
    wc -l agents/kata-project-researcher.md is under 500 lines.
  </verify>
  <done>Command and agent have skills: frontmatter, content deduplicated to skill.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-project-initialization/` shows SKILL.md and references/
2. `grep "skills:" commands/kata/new-project.md` succeeds
3. `grep "skills:" agents/kata-project-researcher.md` succeeds
4. Command reduced from ~900 to ~300-400 lines
</verification>

<success_criteria>
- [ ] kata-project-initialization skill exists with SKILL.md + 2 reference files
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] new-project command has skills: kata-project-initialization in frontmatter
- [ ] new-project command reduced to ~300-400 lines
- [ ] kata-project-researcher agent has skills in frontmatter
- [ ] Agent content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-04-SUMMARY.md`
</output>
