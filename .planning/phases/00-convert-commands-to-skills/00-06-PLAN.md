---
phase: 00-convert-commands-to-skills
plan: 06
type: execute
wave: 2
depends_on: [00-01, 00-02, 00-03, 00-04]
files_modified:
  - skills/kata-roadmap-management/SKILL.md
  - skills/kata-roadmap-management/references/phase-operations.md
  - commands/kata/add-phase.md
  - commands/kata/insert-phase.md
  - commands/kata/remove-phase.md
  - commands/kata/plan-milestone-gaps.md
  - agents/kata-roadmapper.md
autonomous: true

must_haves:
  truths:
    - "/kata:add-phase appends phases to roadmap"
    - "/kata:insert-phase inserts urgent phases with decimal numbering"
    - "Claude autonomously invokes kata-roadmap-management for roadmap operations"
    - "kata-roadmapper agent has access to roadmap skill knowledge"
  artifacts:
    - path: "skills/kata-roadmap-management/SKILL.md"
      provides: "Core roadmap management workflow"
      min_lines: 100
    - path: "commands/kata/add-phase.md"
      provides: "Thin wrapper with skills: kata-roadmap-management in frontmatter"
      contains: "skills:"
    - path: "agents/kata-roadmapper.md"
      provides: "Agent with skills: kata-roadmap-management in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/add-phase.md"
      to: "skills/kata-roadmap-management/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-roadmap-management"
    - from: "agents/kata-roadmapper.md"
      to: "skills/kata-roadmap-management"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-roadmap-management"
---

<objective>
Create the kata-roadmap-management skill from existing roadmap commands and kata-roadmapper agent.

Purpose: Enable autonomous skill invocation for roadmap management while preserving deterministic command execution.

Output: skills/kata-roadmap-management/ directory with SKILL.md and references/, updated command and agent frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-roadmap-management/` NOT `skills/kata/kata-roadmap-management/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/add-phase.md
@commands/kata/insert-phase.md
@commands/kata/remove-phase.md
@commands/kata/plan-milestone-gaps.md
@agents/kata-roadmapper.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-roadmap-management skill structure</name>
  <files>
    skills/kata-roadmap-management/SKILL.md,
    skills/kata-roadmap-management/references/phase-operations.md
  </files>
  <action>
    Create skills/kata-roadmap-management/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~150-200 lines):**
    - Frontmatter: name: kata-roadmap-management, description with trigger phrases ("add phase", "insert phase", "remove phase", "update roadmap", "manage phases", "plan milestone gaps", "roadmap operations")
    - Extract core workflow from roadmap commands and kata-roadmapper.md:
      - Roadmap structure concept
      - Phase numbering (integer vs decimal)
      - Add phase flow summary
      - Insert phase flow summary (urgent/decimal)
      - Remove phase flow summary
      - Gap planning flow summary
    - Reference detailed file in references/
    - Keep under 500 lines

    **references/phase-operations.md:**
    - Extract from commands and agent:
      - Phase numbering rules (integer for planned, decimal for urgent)
      - ROADMAP.md structure and format
      - Phase dependency tracking
      - Renumbering logic
      - Gap identification patterns
  </action>
  <verify>
    ls skills/kata-roadmap-management/ shows SKILL.md and references/ directory.
    wc -l skills/kata-roadmap-management/SKILL.md is between 100-500 lines.
    grep "name: kata-roadmap-management" skills/kata-roadmap-management/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md and 1 reference file containing roadmap management domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update roadmap commands and kata-roadmapper agent</name>
  <files>
    commands/kata/add-phase.md,
    commands/kata/insert-phase.md,
    commands/kata/remove-phase.md,
    commands/kata/plan-milestone-gaps.md,
    agents/kata-roadmapper.md
  </files>
  <action>
    **commands/kata/add-phase.md (~207 lines):**
    - Add `skills: kata-roadmap-management` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **commands/kata/insert-phase.md (~227 lines):**
    - Add `skills: kata-roadmap-management` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **commands/kata/remove-phase.md (~338 lines):**
    - Add `skills: kata-roadmap-management` to frontmatter
    - Move some detailed content to skill
    - Target ~200-250 lines
    - Add @-reference to skill

    **commands/kata/plan-milestone-gaps.md (~284 lines):**
    - Add `skills: kata-roadmap-management` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **agents/kata-roadmapper.md (~605 lines):**
    - Add `skills: kata-roadmap-management` to frontmatter
    - Remove detailed content that now lives in skill
    - Keep: role, core operations summary, structured returns
    - Target ~200-300 lines
  </action>
  <verify>
    grep "skills:" commands/kata/add-phase.md succeeds.
    grep "skills:" commands/kata/insert-phase.md succeeds.
    grep "skills:" commands/kata/remove-phase.md succeeds.
    grep "skills:" commands/kata/plan-milestone-gaps.md succeeds.
    grep "skills:" agents/kata-roadmapper.md succeeds.
    wc -l agents/kata-roadmapper.md is under 350 lines.
  </verify>
  <done>All roadmap commands and agent have skills: frontmatter, agent content deduplicated.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-roadmap-management/` shows SKILL.md and references/
2. All four roadmap commands have `skills:` in frontmatter
3. kata-roadmapper agent has `skills:` in frontmatter
4. Agent reduced from ~605 to ~200-300 lines
</verification>

<success_criteria>
- [ ] kata-roadmap-management skill exists with SKILL.md + 1 reference file
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] All roadmap commands have skills: kata-roadmap-management in frontmatter
- [ ] kata-roadmapper agent has skills: kata-roadmap-management in frontmatter
- [ ] Agent content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-06-SUMMARY.md`
</output>
