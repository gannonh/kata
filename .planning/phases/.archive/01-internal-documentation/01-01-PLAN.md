---
phase: 01-internal-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .docs/diagrams/FLOWS.md
  - .docs/diagrams/README.md
autonomous: true

must_haves:
  truths:
    - "User can view Mermaid diagrams for orchestration flow"
    - "User can view Mermaid diagrams for project lifecycle"
    - "User can view Mermaid diagrams for planning flow"
    - "User can view Mermaid diagrams for execution flow"
    - "User can view Mermaid diagrams for verification flow"
    - "User can view Mermaid diagrams for PR workflow"
  artifacts:
    - path: ".docs/diagrams/FLOWS.md"
      provides: "All 6 workflow diagrams"
      contains: "```mermaid"
    - path: ".docs/diagrams/README.md"
      provides: "Index and navigation for diagrams"
      min_lines: 20
  key_links:
    - from: ".docs/diagrams/README.md"
      to: "FLOWS.md"
      via: "relative link"
      pattern: "\\[.*\\]\\(FLOWS\\.md"
---

<objective>
Create Mermaid flow diagrams documenting Kata's 6 major workflow paths.

Purpose: Enable users and future Claude instances to understand Kata's architecture visually. These diagrams document how skills orchestrate agents, the project lifecycle, and the planning/execution/verification loops.

Output: `.docs/diagrams/FLOWS.md` with 6 Mermaid diagrams, `.docs/diagrams/README.md` index
</objective>

<execution_context>
Executor agent has built-in instructions for plan execution and summary creation.
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-internal-documentation/01-RESEARCH.md

# Source files for accurate diagramming
@skills/planning-phases/SKILL.md
@skills/executing-phases/SKILL.md
@skills/verifying-work/SKILL.md
@skills/starting-projects/SKILL.md
@skills/reviewing-pull-requests/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FLOWS.md with 6 workflow diagrams</name>
  <files>.docs/diagrams/FLOWS.md</files>
  <action>
Create FLOWS.md containing 6 Mermaid flowchart diagrams. Each diagram should be focused (not overloaded), use consistent naming from the codebase, and include helpful labels.

**Diagram 1: High-Level Orchestration**
Show: User -> Commands/Skills -> Agents pattern
- User invokes `/kata:skill-name`
- Skill is the orchestrator
- Skill spawns subagents via Task tool
- Include key skills: planning-phases, executing-phases, verifying-work, starting-projects
- Include agents they spawn: kata-planner, kata-executor, kata-verifier, etc.

**Diagram 2: Project Lifecycle**
Show: State machine from project creation to milestone completion
- starting-projects -> adding-milestones -> planning-phases -> executing-phases -> verifying-work -> completing-milestones
- Show artifacts produced at each stage (PROJECT.md, ROADMAP.md, PLAN.md, SUMMARY.md)

**Diagram 3: Planning Flow**
Show: The planning-phases skill workflow
- Check for research needs -> kata-phase-researcher (optional)
- kata-planner produces PLAN.md files
- kata-plan-checker validates
- Iteration loop if checker finds issues
- Output: approved PLAN.md files

**Diagram 4: Execution Flow**
Show: The executing-phases skill workflow
- Load plans, group by wave
- Execute wave (parallel kata-executor instances)
- Handle checkpoints (pause for user)
- Handle deviations
- Produce SUMMARY.md per plan

**Diagram 5: Verification Flow**
Show: The verifying-work skill workflow
- kata-verifier checks phase goals against must_haves
- On failure: kata-debugger diagnoses
- Gap closure planning
- UAT option

**Diagram 6: PR Workflow**
Show: Branch-based PR workflow
- Phase start -> create branch
- Execution -> commits to branch
- Phase complete -> create/update PR
- Review -> merge
- GitHub Issue sync

Use flowchart TD (top-down) or LR (left-right) as appropriate. Use subgraphs to group related nodes. Include decision diamonds for branches.
  </action>
  <verify>
Verify FLOWS.md exists with:
- Exactly 6 `\`\`\`mermaid` code blocks
- Each diagram has a descriptive header (## Diagram N: Title)
- Diagrams use consistent naming (kata-executor not "executor agent")
- No syntax errors (each mermaid block is valid)
  </verify>
  <done>
FLOWS.md contains 6 valid Mermaid flowchart diagrams covering orchestration, lifecycle, planning, execution, verification, and PR workflows.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create README.md index for diagrams</name>
  <files>.docs/diagrams/README.md</files>
  <action>
Create README.md as the navigation/index for the diagrams directory.

Include:
1. Title: "# Kata Workflow Diagrams"
2. Overview paragraph explaining purpose (visual documentation of Kata architecture)
3. Table of contents linking to each diagram section in FLOWS.md
4. Brief description of what each diagram covers
5. Note about Mermaid rendering (GitHub renders natively, can use mermaid.live for editing)
6. Link back to main documentation if helpful

Format the ToC as a table:
| Diagram | Purpose |
| --- | --- |
| [Orchestration](FLOWS.md#1-high-level-orchestration) | How users interact with skills and agents |
| ... | ... |
  </action>
  <verify>
README.md exists with:
- Links to each of the 6 diagrams in FLOWS.md
- Brief descriptions for each diagram
- Valid markdown formatting
  </verify>
  <done>
README.md provides navigation to all 6 diagrams with descriptions.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Verify GitHub can render the Mermaid diagrams (push and check, or use mermaid.live)
2. Verify README.md links resolve correctly to FLOWS.md anchors
3. Verify diagrams accurately reflect actual skill/agent relationships in codebase
</verification>

<success_criteria>
- [ ] 6 Mermaid diagrams exist in FLOWS.md
- [ ] Diagrams cover: orchestration, lifecycle, planning, execution, verification, PR
- [ ] Diagrams use consistent naming from codebase
- [ ] README.md provides navigation to all diagrams
- [ ] TOOL-01 requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/01-internal-documentation/01-01-SUMMARY.md`
</output>
