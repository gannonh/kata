---
phase: 03-roadmap-enhancements
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-add-milestone/SKILL.md
  - skills/kata-complete-milestone/references/milestone-complete.md
  - skills/kata-complete-milestone/references/milestone-archive-template.md
  - agents/kata-roadmapper.md
autonomous: true
source_issue: ""

must_haves:
  truths:
    - "kata-add-milestone writes planned milestones with consistent format when creating roadmap"
    - "kata-complete-milestone archives milestones using standardized details block format"
    - "kata-roadmapper includes Planned Milestones section guidance in output format"
    - "milestone-archive-template includes Goal line in details block template"
  artifacts:
    - path: "skills/kata-add-milestone/SKILL.md"
      provides: "Updated roadmapper spawning with Planned Milestones format guidance"
      contains: "Planned Milestones"
    - path: "skills/kata-complete-milestone/references/milestone-complete.md"
      provides: "Standardized details block format in reorganize_roadmap step"
      contains: "Goal:"
    - path: "skills/kata-complete-milestone/references/milestone-archive-template.md"
      provides: "Archive template with Goal line"
      contains: "Goal:"
    - path: "agents/kata-roadmapper.md"
      provides: "Output format guidance including Planned Milestones section"
      contains: "Planned Milestones"
  key_links:
    - from: "skills/kata-add-milestone/SKILL.md Phase 9"
      to: "agents/kata-roadmapper.md"
      via: "roadmapper spawning instructions"
      pattern: "kata-roadmapper"
    - from: "skills/kata-complete-milestone/references/milestone-complete.md reorganize_roadmap"
      to: ".planning/ROADMAP.md"
      via: "details block template in step"
      pattern: "details.*summary.*SHIPPED"
---

<objective>
Update skills and agents that write ROADMAP.md to use consistent formatting conventions.

Purpose: Ensure future milestones follow the same formatting standards established in Plan 01 (ROAD-02). Without these updates, new milestones created by kata-add-milestone and archived by kata-complete-milestone would reintroduce inconsistencies.
Output: Updated skills and agent files with standardized ROADMAP.md formatting conventions.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/pending/03-roadmap-enhancements/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update kata-complete-milestone to use standardized details block format</name>
  <files>skills/kata-complete-milestone/references/milestone-complete.md, skills/kata-complete-milestone/references/milestone-archive-template.md</files>
  <action>
**In milestone-complete.md**, find the `reorganize_roadmap` step (around line 611). Update the example `<details>` block template to include the **Goal:** line and ensure the summary line uses "SHIPPED" format. The current template at lines 628-636 should become:

```markdown
<details>
<summary>âœ… v1.0 MVP (Phases 1-4) â€” SHIPPED YYYY-MM-DD</summary>

**Goal:** [One sentence milestone goal]

- [x] Phase 1: Foundation (2/2 plans) â€” completed YYYY-MM-DD
- [x] Phase 2: Authentication (2/2 plans) â€” completed YYYY-MM-DD
- [x] Phase 3: Core Features (3/3 plans) â€” completed YYYY-MM-DD
- [x] Phase 4: Polish (1/1 plan) â€” completed YYYY-MM-DD

[Full archive](milestones/v1.0-ROADMAP.md)

</details>
```

Also update the Milestones overview example (around line 622-625) to include planned milestones with circle symbol:

```markdown
## Milestones

- âœ… **v1.0 MVP** â€” Phases 1-4 (shipped YYYY-MM-DD)
- ðŸ”„ **v1.1 Security** â€” Phases 5-6 (in progress)
- â—‹ **v2.0 Redesign** â€” planned
```

Add a "Planned Milestones" section example after the details block, before the Current Milestone heading, to show the expected format:

```markdown
## Planned Milestones

### v2.0 Redesign (Planned)

**Goal:** [To be defined when milestone becomes active]

**Target features:**
- [Feature placeholder]
```

**In milestone-archive-template.md**, update the archive template (around line 9-35) to include a **Goal:** field in the main template header. The archive already has an Overview section, but add a `**Goal:** {{MILESTONE_GOAL}}` line right after the Status line (around line 12), between `**Status:**` and `**Phases:**`.
  </action>
  <verify>
Grep milestone-complete.md for "Goal:" within the reorganize_roadmap step to confirm it appears in the template. Grep milestone-archive-template.md for "MILESTONE_GOAL" to confirm the placeholder exists.

Run:
- `grep -c "Goal:" skills/kata-complete-milestone/references/milestone-complete.md` should return at least 1
- `grep "MILESTONE_GOAL" skills/kata-complete-milestone/references/milestone-archive-template.md` should return a match
- `grep "Planned Milestones" skills/kata-complete-milestone/references/milestone-complete.md` should return a match
  </verify>
  <done>milestone-complete.md reorganize_roadmap step uses standardized details block with Goal line, archive link, and Planned Milestones section. milestone-archive-template.md includes Goal field.</done>
</task>

<task type="auto">
  <name>Task 2: Update kata-add-milestone and kata-roadmapper with Planned Milestones format</name>
  <files>skills/kata-add-milestone/SKILL.md, agents/kata-roadmapper.md</files>
  <action>
**In kata-add-milestone/SKILL.md**, update Phase 9 (Create Roadmap, around line 695) to include instructions for the roadmapper about the Planned Milestones section. Add to the `<instructions>` block inside the Task prompt (around line 734-741), after item 6:

```
7. Include "Planned Milestones" section in ROADMAP.md if user mentioned future milestone ideas
8. Use â—‹ symbol for planned milestones in overview, ðŸ”„ for current, âœ… for completed
9. Include planned milestones in Progress Summary table with "Planned" status
```

Also in Phase 9, update the roadmapper instructions to specify the standardized completed milestone format. Add after the instructions block (before the closing `"` of the prompt):

```
<format_conventions>
Milestones overview uses these symbols:
- âœ… for shipped milestones
- ðŸ”„ for current/in-progress milestone
- â—‹ for planned milestones

Completed milestone details blocks MUST include:
- Summary line: âœ… v[X.Y] [Name] â€” SHIPPED [DATE]
- **Goal:** line
- Phase checkboxes with plan counts and dates
- [Full archive](milestones/v[X.Y]-ROADMAP.md) link

Progress Summary table includes planned milestones with "Planned" status and "â€”" for metrics.
</format_conventions>
```

**In agents/kata-roadmapper.md**, update the `<output_formats>` section (around line 283-294) to include guidance about the Planned Milestones section and consistent formatting. Add after "Key sections:" (line 291):

```markdown
- Milestones overview (âœ… shipped, ðŸ”„ current, â—‹ planned)
- Planned Milestones section (if future milestones discussed)
- Completed Milestones in `<details>` blocks (consistent format with Goal, phases, archive link)
```

And update the existing key sections list to be more specific:

```markdown
Key sections:
- Overview (2-3 sentences)
- Milestones overview (âœ… shipped, ðŸ”„ current, â—‹ planned)
- Completed Milestones (collapsed `<details>` with Goal, phase list, archive link)
- Planned Milestones (future work with Goal and Target features)
- Current Milestone with Phases (Goal, Dependencies, Requirements, Success Criteria)
- Progress Summary table (includes planned milestones with "Planned" status)
```
  </action>
  <verify>
Confirm format conventions are present in updated files:
- `grep "format_conventions" skills/kata-add-milestone/SKILL.md` returns a match
- `grep "Planned Milestones" agents/kata-roadmapper.md` returns a match
- `grep "â—‹" agents/kata-roadmapper.md` returns a match (circle symbol for planned)
  </verify>
  <done>kata-add-milestone passes format conventions to roadmapper. kata-roadmapper output format includes Planned Milestones guidance and consistent symbol vocabulary.</done>
</task>

</tasks>

<verification>
1. milestone-complete.md reorganize_roadmap step produces consistent `<details>` blocks with Goal line
2. milestone-archive-template.md includes Goal placeholder
3. kata-add-milestone passes format conventions to roadmapper agent
4. kata-roadmapper output format describes Planned Milestones section and symbol vocabulary
5. All changes are additive (no existing functionality broken)
</verification>

<success_criteria>
- Future milestone completions produce consistent `<details>` formatting (ROAD-02)
- Future roadmap creation includes Planned Milestones section (ROAD-01)
- Symbol vocabulary (âœ… ðŸ”„ â—‹) documented in both skills and agent (ROAD-02)
</success_criteria>

<output>
After completion, create `.planning/phases/pending/03-roadmap-enhancements/03-02-SUMMARY.md`
</output>
