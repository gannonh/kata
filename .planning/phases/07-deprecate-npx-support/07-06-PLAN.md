---
phase: 07-deprecate-npx-support
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - CLAUDE.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Development installation docs describe build:plugin workflow"
    - "No references to obsolete bin/install.js --local command"
    - "Local testing workflow uses --plugin-dir flag"
  artifacts:
    - path: "README.md"
      provides: "Development Installation section"
      contains: "npm run build:plugin"
    - path: "CLAUDE.md"
      provides: "Development Commands section"
      contains: "--plugin-dir"
  key_links:
    - from: "README.md"
      to: "scripts/build.js"
      via: "npm run build:plugin command"
      pattern: "npm run build:plugin"
---

<objective>
Fix development workflow documentation to reflect plugin-only distribution.

Purpose: Close documentation gap from Phase 7 verification — development installation instructions still reference obsolete `node bin/install.js --local` command that now only prints a deprecation message.

Output: Updated README.md and CLAUDE.md with correct local development workflow using `npm run build:plugin` and `--plugin-dir` flag.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-deprecate-npx-support/07-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md Development Installation</name>
  <files>README.md</files>
  <action>
Replace lines 91-104 (the Development Installation details section).

BEFORE (lines 91-104):
```markdown
<details>
<summary><strong>Development Installation</strong></summary>

Clone the repository and run the installer locally:

```bash
git clone https://github.com/gannonh/kata.git
cd kata
node bin/install.js --local
```

Installs to `./.claude/` for testing modifications before contributing.

</details>
```

AFTER (replacement for lines 91-104):
```markdown
<details>
<summary><strong>Development Installation</strong></summary>

Clone the repository and build the plugin:

```bash
git clone https://github.com/gannonh/kata.git
cd kata
npm run build:plugin
```

Test locally using Claude Code's plugin-dir flag:

```bash
# From a test project directory
claude --plugin-dir /path/to/kata/dist/plugin
```

Or manually copy to a test project:

```bash
# Copy built plugin to test project
cp -r dist/plugin/* /path/to/test-project/.claude/plugins/kata/
```

</details>
```

Key changes:
- Replace `node bin/install.js --local` with `npm run build:plugin`
- Add `--plugin-dir` flag documentation for local testing
- Add manual copy option as alternative
  </action>
  <verify>
grep -n "bin/install.js" README.md returns no matches
grep -n "npm run build:plugin" README.md returns at least one match
grep -n "plugin-dir" README.md returns at least one match
  </verify>
  <done>README.md Development Installation section describes build:plugin workflow with --plugin-dir flag, no references to obsolete install.js</done>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md Installation and Testing section</name>
  <files>CLAUDE.md</files>
  <action>
Replace lines 19-35 (the Installation and Testing subsection).

BEFORE (lines 19-35):
```markdown
### Installation and Testing

**⚠️ NEVER run `node bin/install.js --local` from within the kata directory itself.** This overwrites `.claude/` with Kata's own files, breaking the development environment. Test local installs from a separate project directory.

```bash
# Install locally to ./.claude/ for development (run from a DIFFERENT project, not kata/)
node bin/install.js --local

# Verify installation (in Claude Code)
/kata:providing-help

# Update local install after changes
node bin/install.js --local

# Verify skills installed
ls .claude/skills/*
```
```

AFTER (replacement for lines 19-35):
```markdown
### Installation and Testing

Build and test the plugin locally:

```bash
# Build the plugin
npm run build:plugin

# Test from a separate project using --plugin-dir
cd /path/to/test-project
claude --plugin-dir /path/to/kata/dist/plugin

# Verify skills load
/kata:help
```

Alternative: manually copy to test project's plugin directory:

```bash
mkdir -p /path/to/test-project/.claude/plugins/kata
cp -r dist/plugin/* /path/to/test-project/.claude/plugins/kata/
```

After rebuilding, restart Claude Code to pick up changes.
```

Key changes:
- Remove obsolete warning about `bin/install.js --local`
- Replace with `npm run build:plugin` workflow
- Add `--plugin-dir` flag for local testing
  </action>
  <verify>
grep -n "NEVER run.*bin/install.js" CLAUDE.md returns no matches
grep -n "npm run build:plugin" CLAUDE.md returns at least one match
grep -n "plugin-dir" CLAUDE.md returns at least one match
  </verify>
  <done>CLAUDE.md Installation and Testing section documents build:plugin workflow with --plugin-dir flag, obsolete warning removed</done>
</task>

<task type="auto">
  <name>Task 3: Update CLAUDE.md Installation System section</name>
  <files>CLAUDE.md</files>
  <action>
Replace lines 143-155 (the Installation System section).

BEFORE (lines 143-155):
```markdown
## Installation System (bin/install.js)

Node.js installer that copies Kata files to Claude Code's plugin directory:

**Modes:**
- `--global` / `-g` → Install to `~/.claude/`
- `--local` / `-l` → Install to `./.claude/`
- `--config-dir <path>` → Custom Claude config directory

**Key behavior:**
- Expands `~` to home directory for container compatibility
- Respects `CLAUDE_CONFIG_DIR` environment variable
- Copies: `skills/`, `agents/`, `hooks/`
```

AFTER (replacement for lines 143-155):
```markdown
## Installation System (bin/install.js)

**Deprecated.** The bin/install.js script now displays a deprecation message directing users to install via the Claude Code plugin marketplace.

For local development, use `npm run build:plugin` instead. See "Installation and Testing" above.
```

Key change:
- Mark section as deprecated with brief explanation
- Point to new workflow
  </action>
  <verify>
grep -n "Deprecated" CLAUDE.md returns at least one match in Installation System section
grep -n "Modes:" CLAUDE.md returns no matches (obsolete content removed)
  </verify>
  <done>CLAUDE.md Installation System section marked as deprecated with pointer to new workflow</done>
</task>

</tasks>

<verification>
After completing all tasks:

```bash
# Verify no obsolete references remain
grep -r "bin/install.js --local" README.md CLAUDE.md
# Should return nothing

# Verify new workflow is documented
grep -c "npm run build:plugin" README.md CLAUDE.md
# Should return counts > 0 for both files

grep -c "plugin-dir" README.md CLAUDE.md
# Should return counts > 0 for both files

# Verify deprecation notice
grep "Deprecated" CLAUDE.md
# Should return the deprecation notice line
```
</verification>

<success_criteria>
- README.md Development Installation uses `npm run build:plugin` workflow
- CLAUDE.md Installation and Testing uses `npm run build:plugin` workflow
- Both files document `--plugin-dir` flag for local testing
- No references to obsolete `node bin/install.js --local` command
- CLAUDE.md Installation System section marked as deprecated
</success_criteria>

<output>
After completion, create `.planning/phases/07-deprecate-npx-support/07-06-SUMMARY.md`
</output>
