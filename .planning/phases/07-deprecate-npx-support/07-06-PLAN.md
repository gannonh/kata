---
phase: 07-deprecate-npx-support
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - CLAUDE.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Development installation docs describe build:plugin workflow"
    - "No references to obsolete bin/install.js --local command"
    - "Local testing workflow uses --plugin-dir flag"
  artifacts:
    - path: "README.md"
      provides: "Development Installation section"
      contains: "npm run build:plugin"
    - path: "CLAUDE.md"
      provides: "Development Commands section"
      contains: "--plugin-dir"
  key_links:
    - from: "README.md"
      to: "scripts/build.js"
      via: "npm run build:plugin command"
      pattern: "npm run build:plugin"
---

<objective>
Fix development workflow documentation to reflect plugin-only distribution.

Purpose: Close documentation gap from Phase 7 verification â€” development installation instructions still reference obsolete `node bin/install.js --local` command that now only prints a deprecation message.

Output: Updated README.md and CLAUDE.md with correct local development workflow using `npm run build:plugin` and `--plugin-dir` flag.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-deprecate-npx-support/07-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md Development Installation</name>
  <files>README.md</files>
  <action>
Replace the Development Installation section (lines 91-104) with the new plugin-based workflow:

```markdown
<details>
<summary><strong>Development Installation</strong></summary>

Clone the repository and build the plugin:

```bash
git clone https://github.com/gannonh/kata.git
cd kata
npm run build:plugin
```

Test locally using Claude Code's plugin-dir flag:

```bash
# From a test project directory
claude --plugin-dir /path/to/kata/dist/plugin
```

Or manually copy to a test project:

```bash
# Copy built plugin to test project
cp -r dist/plugin/* /path/to/test-project/.claude/plugins/kata/
```

</details>
```

The key changes:
- Replace `node bin/install.js --local` with `npm run build:plugin`
- Add `--plugin-dir` flag documentation for local testing
- Add manual copy option as alternative
  </action>
  <verify>
grep -n "bin/install.js" README.md returns no matches
grep -n "npm run build:plugin" README.md returns at least one match
grep -n "plugin-dir" README.md returns at least one match
  </verify>
  <done>README.md Development Installation section describes build:plugin workflow with --plugin-dir flag, no references to obsolete install.js</done>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md Development Commands</name>
  <files>CLAUDE.md</files>
  <action>
Replace the Installation and Testing subsection (lines 19-35) with the new plugin-based workflow:

```markdown
### Installation and Testing

Build and test the plugin locally:

```bash
# Build the plugin
npm run build:plugin

# Test from a separate project using --plugin-dir
cd /path/to/test-project
claude --plugin-dir /path/to/kata/dist/plugin

# Verify skills load
/kata:help
```

Alternative: manually copy to test project's plugin directory:

```bash
mkdir -p /path/to/test-project/.claude/plugins/kata
cp -r dist/plugin/* /path/to/test-project/.claude/plugins/kata/
```

After rebuilding, restart Claude Code to pick up changes.
```

Remove the obsolete warning about `bin/install.js --local` since that command now only shows a deprecation message.

Also update the "Installation System (bin/install.js)" section (around line 143) to note deprecation:

```markdown
## Installation System (bin/install.js)

**Deprecated.** The bin/install.js script now displays a deprecation message directing users to install via the Claude Code plugin marketplace.

For local development, use `npm run build:plugin` instead. See "Installation and Testing" above.
```
  </action>
  <verify>
grep -n "NEVER run.*bin/install.js" CLAUDE.md returns no matches
grep -n "npm run build:plugin" CLAUDE.md returns at least one match
grep -n "plugin-dir" CLAUDE.md returns at least one match
grep -n "Deprecated" CLAUDE.md returns at least one match in Installation System section
  </verify>
  <done>CLAUDE.md documents build:plugin workflow with --plugin-dir flag, obsolete warning removed, bin/install.js section marked as deprecated</done>
</task>

</tasks>

<verification>
After completing both tasks:

```bash
# Verify no obsolete references remain
grep -r "bin/install.js --local" README.md CLAUDE.md
# Should return nothing

# Verify new workflow is documented
grep -c "npm run build:plugin" README.md CLAUDE.md
# Should return counts > 0 for both files

grep -c "plugin-dir" README.md CLAUDE.md
# Should return counts > 0 for both files
```
</verification>

<success_criteria>
- README.md Development Installation uses `npm run build:plugin` workflow
- CLAUDE.md Development Commands uses `npm run build:plugin` workflow
- Both files document `--plugin-dir` flag for local testing
- No references to obsolete `node bin/install.js --local` command
- CLAUDE.md Installation System section marked as deprecated
</success_criteria>

<output>
After completion, create `.planning/phases/07-deprecate-npx-support/07-06-SUMMARY.md`
</output>
