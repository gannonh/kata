# Milestone v1.9.0: Template Overrides (Universal)

**Status:** âœ… SHIPPED 2026-02-08
**Goal:** Fix template override infrastructure to work universally for all users (plugin + skills-only), migrate validation from hooks into skills, create template customization UI, and document the feature.
**Phases:** 40-43
**Total Plans:** 5

## Overview

v1.9.0 makes the template override system universal. Template resolution was rewritten to use relative sibling discovery (no absolute paths), validation was migrated from SessionStart hooks into skills, a customization UI was built, and the feature was documented.

## Phases

### Phase 40: Template Resolution

**Goal**: Rewrite resolve-template.sh to use relative sibling discovery so template resolution works for all installation locations without absolute paths.
**Depends on**: None
**Plans**: 1 plan

Plans:

- [x] 40-01: Rewrite resolve-template.sh with sibling discovery

**Details:**
Single code path using sibling discovery via `pwd -P` and two-level dirname traversal. No CLAUDE_PLUGIN_ROOT fast path. Works for plugin, skills-sh, and manual installations.

### Phase 41: Validation Migration

**Goal**: Move template drift detection and config validation from SessionStart hooks into skills so validation runs universally.
**Depends on**: Phase 40
**Plans**: 2 plans

Plans:

- [x] 41-01: Create portable validation scripts (check-config.sh, check-template-drift.sh)
- [x] 41-02: Wire validation pre-flight into orchestrator skills, remove hooks

**Details:**
Validation scripts in kata-doctor/scripts/ using inline Node.js heredocs. Pre-flight calls added to 5 orchestrator skills. Hooks system and build infrastructure removed.

### Phase 42: Template Customization Skill

**Goal**: Build `/kata-customize` skill for listing, copying, editing, and validating template overrides.
**Depends on**: Phase 40, Phase 41
**Plans**: 1 plan

Plans:

- [x] 42-01: Create kata-customize skill with four operations and list-templates.sh

**Details:**
Single-file orchestrator pattern (no subagents, no references/ directory). Uses list-templates.sh for dynamic schema-backed template discovery via sibling-skill directories.

### Phase 43: Documentation

**Goal**: Document template customization in README, template schemas, example workflows, and migration guide.
**Depends on**: Phase 42
**Plans**: 1 plan

Plans:

- [x] 43-01: Complete documentation (README, schema reference, migration guide)

**Details:**
README updated with v1.9.0 What's New and Template Customization sections. .docs/TEMPLATE-CUSTOMIZATION.md comprehensive reference covering all 5 templates. Migration guide from hooks to skills-based validation.

---

## Milestone Summary

**Key Decisions:**

- Single code path using sibling discovery; no CLAUDE_PLUGIN_ROOT fast path
- Validation scripts in kata-doctor/scripts/ as portable alternatives to SessionStart hooks
- Both validation scripts always exit 0 (warnings only, never blocking)
- Single-file skill pattern for UI-only skills that don't spawn subagents
- YAML frontmatter format for template schemas

**Issues Resolved:**

- Template resolution only worked for plugin installations (absolute paths)
- SessionStart hooks didn't run for skills-only users
- No UI for discovering or managing template overrides

**Issues Deferred:**

- Template versioning and migration system
- Template inheritance/composition
- Project-specific template validation rules

---

_For current project status, see .planning/ROADMAP.md_
